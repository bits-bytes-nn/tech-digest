{% macro main_content(article) %}
<tr>
  <td align="center" class="wrapper">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tbody>
        <tr>
          <td>
            <table border="0" cellpadding="0" cellspacing="0" width="100%" class="content-card">
              <tr>
                <td style="padding: 0px 0px 22px 0px">
                  <table border="0" cellpadding="0" cellspacing="0" class="card-1">
                    <tbody>
                      <tr>
                        <td>
                          <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                              <td width="90" class="thumbnail-container">
                                <img
                                  src="{{ article.thumbnail }}"
                                  class="thumbnail"
                                  alt="Thumbnail"
                                />
                              </td>
                              <td class="title-container">
                                <div class="paper-title">
                                  {{ article.title }}
                                </div>
                              </td>
                            </tr>
                          </table>

                          <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                              <td class="date-container">
                                <div class="publication-date">
                                  Published on {{ article.published_date }}
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td class="tags-container">
                                <div class="tags-wrapper">
                                  {% for tag in article.tags %}
                                  <span class="tag">
                                    <span class="tag-text">#{{ tag }}</span>
                                  </span>
                                  {% endfor %}
                                </div>
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>

                      <tr>
                        <td class="content-container">
                          <div class="content-wrapper">
                            {{ article.summary | safe }}
                          </div>
                          <style>
                            img {
                              max-width: 100%;
                              height: auto;
                              border-radius: 8px;
                              margin: 16px 0;
                            }
                            pre,
                            code {
                              font-family: "IBM Plex Mono", "Roboto Mono", monospace !important;
                              font-size: 0.92rem !important;
                              line-height: 1.6 !important;
                            }
                            pre {
                              background-color: #f8f9fa !important;
                              padding: 1.2rem !important;
                              border-radius: 8px !important;
                              overflow-x: auto !important;
                              box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
                              margin: 20px 0;
                            }
                            code {
                              background-color: #f1f3f5 !important;
                              padding: 0.2em 0.4em !important;
                              border-radius: 4px !important;
                              color: #e83e8c;
                            }
                            pre code {
                              padding: 0 !important;
                              color: inherit;
                              background: transparent !important;
                            }
                            h2 {
                              font-family: 'Noto Serif KR', 'Lora', 'Georgia', serif;
                              color: #2c3e50;
                              margin-top: 32px;
                              margin-bottom: 16px;
                              font-size: 1.7rem;
                              font-weight: 700;
                              letter-spacing: -0.02em;
                              line-height: 1.4;
                            }
                            h3 {
                              font-family: 'Noto Serif KR', 'Lora', 'Georgia', serif;
                              color: #2c3e50;
                              margin-top: 28px;
                              margin-bottom: 14px;
                              font-size: 1.4rem;
                              font-weight: 700;
                              letter-spacing: -0.02em;
                              line-height: 1.4;
                            }
                            p {
                              margin-bottom: 1.2rem;
                              margin-top: 0;
                            }
                            ul, ol {
                              margin-bottom: 1.2rem;
                              padding-left: 24px;
                              margin-top: 0;
                            }
                            li {
                              margin-bottom: 0.7rem;
                            }
                            blockquote {
                              border-left: 4px solid #ced4da;
                              padding: 0.5rem 0 0.5rem 1rem;
                              margin: 1.5rem 0;
                              color: #495057;
                              font-style: italic;
                            }
                            a {
                              color: #0072ce;
                              text-decoration: underline;
                              font-weight: 500;
                            }
                            a:hover {
                              color: #005b9f;
                            }
                          </style>
                        </td>
                      </tr>

                      <tr>
                        <td class="button-container">
                          <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                              <td>
                                <table border="0" cellspacing="0" cellpadding="0" style="width: 100%">
                                  <tr>
                                    <td align="center" style="width: 160px">
                                      <a href="{{ article.link }}" target="_blank" class="view-more-btn">
                                        View More
                                      </a>
                                    </td>
                                  </tr>
                                </table>
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>

                      {% if article.urls %}
                      <tr>
                        <td class="divider-container">
                          <hr class="divider" />
                        </td>
                      </tr>
                      <tr>
                        <td class="resources-container">
                          <div class="resources-title">
                            Additional resources for reference
                          </div>
                          {% for url in article.urls %}
                          <div class="resource-item">
                            â€¢ {{ url | safe }}
                          </div>
                          {% endfor %}
                        </td>
                      </tr>
                      {% endif %}
                    </tbody>
                  </table>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </td>
</tr>
{% endmacro %}

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:v="urn:schemas-microsoft-com:vml"
  xmlns:o="urn:schemas-microsoft-com:office:office"
>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta content="telephone=no" name="format-detection" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>{{ article.title }}</title>
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Serif+KR:wght@400;700&family=Raleway:wght@400;600;700&family=Lora:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style type="text/css">
      /* Base Styles */
      body {
        margin: 0;
        padding: 0;
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        background-color: #2c3e50;
      }

      img {
        border: 0;
        line-height: 100%;
        outline: none;
        text-decoration: none;
        -ms-interpolation-mode: bicubic;
        max-width: 100% !important;
        height: auto !important;
      }

      table {
        border-collapse: collapse !important;
        table-layout: fixed;
        margin: 0 auto;
      }

      /* Container Elements */
      .wrapper {
        max-width: 800px !important;
        width: 800px;
        margin: 0 auto;
        background-color: #f8f9fa;
        padding: 24px;
      }

      .content-card {
        margin-bottom: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        background-color: #FFFFFF;
      }

      .card-1 {
        width: 100%;
        border-radius: 12px;
        overflow: hidden;
      }

      /* Header Elements */
      .thumbnail-container {
        padding: 22px;
      }

      .thumbnail {
        width: 90px;
        height: 90px;
        border-radius: 6px;
        max-width: 100%;
        height: auto;
      }

      .title-container {
        padding: 22px;
        text-align: left;
        vertical-align: middle;
      }

      .paper-title {
        font-weight: 700;
        font-family: 'Noto Serif KR', 'Lora', 'Georgia', serif;
        color: #212529 !important;
        font-size: 2.2rem;
        line-height: 1.3;
        letter-spacing: -0.02em;
      }

      .date-container {
        padding: 0 22px 14px 22px;
        text-align: center;
      }

      .publication-date {
        font-family: 'Noto Sans KR', 'Raleway', 'Arial', sans-serif;
        color: #6c757d !important;
        font-size: 1.15rem;
        line-height: 1.7;
        font-weight: 400;
      }

      .tags-container {
        padding: 0 22px;
        text-align: center;
      }

      .tags-wrapper {
        font-family: 'Noto Sans KR', 'Raleway', 'Arial', sans-serif;
        color: #212529 !important;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .tag {
        background-color: #e9ecef;
        padding: 5px 10px;
        border-radius: 6px;
        margin: 0 4px 6px 0;
        display: inline-block;
        transition: all 0.2s ease;
      }

      .tag-text {
        color: #495057;
        font-weight: 600;
        letter-spacing: -0.01em;
      }

      /* Content Area */
      .content-container {
        font-family: 'Noto Sans KR', 'Raleway', 'Arial', sans-serif;
        color: #212529 !important;
        font-size: 1.15rem;
        line-height: 1.8;
        letter-spacing: -0.01em;
        padding: 22px;
        word-break: keep-all;
        overflow-wrap: break-word;
        background-color: #FFFFFF;
      }

      .content-wrapper {
        max-width: 100%;
      }

      /* Button Area */
      .button-container {
        background-color: #FFFFFF;
        padding: 0 22px 22px 22px;
      }

      .view-more-btn {
        font-family: 'Noto Sans KR', 'Raleway', 'Arial', sans-serif;
        font-size: 1rem;
        line-height: 1.5;
        font-weight: 600;
        color: #ffffff;
        text-decoration: none;
        border-radius: 6px;
        padding: 12px 24px;
        display: inline-block;
        background: linear-gradient(135deg, #ff9900 0%, #ffb84d 100%);
        box-shadow: 0 4px 12px rgba(255, 153, 0, 0.25), 0 2px 4px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        letter-spacing: 0.01em;
      }

      /* Resources Section */
      .divider-container {
        padding: 0 22px;
      }

      .divider {
        border: 0;
        border-top: 1px solid #dee2e6;
        margin: 0;
      }

      .resources-container {
        background-color: #FFFFFF;
        padding: 22px;
        font-family: 'Noto Sans KR', 'Raleway', 'Arial', sans-serif;
        color: #212529 !important;
        font-size: 1.15rem;
        line-height: 1.7;
      }

      .resources-title {
        font-weight: 700;
        margin-bottom: 12px;
        color: #2c3e50;
      }

      .resource-item {
        margin-bottom: 8px;
      }

      /* Utility Classes */
      .padding-container {
        padding: 0 15px;
        text-align: center;
      }

      .content-section {
        margin: 0 auto;
        text-align: center;
      }

      /* Media Queries */
      @media only screen and (max-width: 800px) {
        .wrapper {
          width: 100% !important;
          max-width: 100% !important;
          padding: 16px;
        }

        .paper-title {
          font-size: 1.8rem;
        }

        .thumbnail {
          width: 70px;
          height: 70px;
        }

        .thumbnail-container, .title-container, .content-container, .resources-container {
          padding: 16px;
        }

        .date-container {
          padding: 0 16px 10px 16px;
        }

        .tags-container {
          padding: 0 16px;
        }

        .button-container {
          padding: 0 16px 16px 16px;
        }

        .divider-container {
          padding: 0 16px;
        }
      }

      /* Code Formatting */
      pre,
      code {
        font-family: "IBM Plex Mono", "Roboto Mono", monospace !important;
        font-size: 0.92rem !important;
        line-height: 1.6 !important;
      }

      pre {
        background-color: #f8f9fa !important;
        padding: 1.2rem !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.05) !important;
        border: 1px solid #e9ecef !important;
        margin: 16px 0 !important;
      }

      code {
        background-color: #f1f3f5 !important;
        padding: 0.2em 0.4em !important;
        border-radius: 4px !important;
        border: 1px solid #e9ecef !important;
        color: #e83e8c;
      }

      pre code {
        padding: 0 !important;
        border: none !important;
        color: inherit;
        background: transparent !important;
      }

      /* Blockquotes */
      blockquote {
        border-left: 4px solid #ced4da;
        padding-left: 16px;
        margin-left: 0;
        color: #495057;
        font-style: italic;
      }
    </style>
  </head>
  <body style="margin: 0; padding: 0; background-color: #2c3e50">
    <table
      width="100%"
      cellpadding="0"
      cellspacing="0"
      border="0"
      bgcolor="#2c3e50"
      align="center"
    >
      <div
        class="Gmail"
        style="
          height: 1px !important;
          margin-top: -1px !important;
          max-width: 800px !important;
          min-width: 800px !important;
          width: 800px !important;
        "
      ></div>

      <div style="display: none; max-height: 0; overflow: hidden">
        {{ article.title }}
      </div>

      <div style="display: none; max-height: 0; overflow: hidden">
        &nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;
      </div>

      {{ main_content(article) }}
    </table>
  </body>
</html>10